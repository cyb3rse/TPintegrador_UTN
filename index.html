<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscador de Países</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f8f8; padding: 30px; }
        h1 { color: #FF9A03; }
        form { margin-bottom: 20px; }
        input[type="text"], input[type="number"], select {
            padding: 8px; border: 1px solid #ccc; border-radius: 4px;
        }
        input[type="text"] { width: 300px; }
        button.primary {
            padding: 8px 15px; background: #FF9A03; border: none; color: white;
            border-radius: 4px; cursor: pointer;
        }
        button.primary:hover { background: #e58900; }
        button.secondary {
            padding: .5rem 1rem; font-size: 1rem; cursor: pointer; border-radius: 6px; border: 1px solid #666; background: #f2f2f2;
        }
        table {
            border-collapse: collapse; width: 100%; background: white;
        }
        th, td {
            border: 1px solid #ddd; padding: 8px; text-align: left;
        }
        th { background-color: #FF9A03; color: white; }
        .filtros-row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin-bottom: 18px; }
        .filtro-box { background:white; padding:8px; border-radius:6px; box-shadow:0 1px 3px rgba(0,0,0,0.04); border:1px solid #eee; }
        /* Contenedor oculto por defecto */
        .reveal {
          overflow: hidden;
          max-height: 0;
          opacity: 0;
          transition: max-height .35s ease, opacity .25s ease;
        }
        /* Cuando esté visible */
        .reveal.is-open {
          max-height: 400px; /* suficiente para el contenido esperado */
          opacity: 1;
        }
        /*Caja de contenido */
        .contenido {
          margin-top: 1rem;
          padding: 1rem;
          border-radius: 8px;
          box-shadow: 0 1px 4px rgba(0,0,0,.08);
          background: #fff;
          border: 1px solid #e6e6e6;
        }
    </style>
</head>
<body>
    <h1> Buscador de Países</h1>

    <!-- FORMULARIO PRINCIPAL: BUSCADOR + FILTROS -->
    <form method="POST" style="margin-bottom: 10px;">
        <div class="filtros-row">
            <!-- Buscador por nombre -->
            <div class="filtro-box">
                <label for="busqueda">Buscar país:</label><br>
                <input type="text" id="busqueda" name="busqueda" placeholder="Escribe el nombre del país..."
                    value="{{ filtros.search }}">
            </div>

            <!-- Selección de continente -->
            <div class="filtro-box">
                <label for="continente">Continente:</label><br>
                <select id="continente" name="continente">
                    <option value="todos" {% if filtros.continente == 'todos' %}selected{% endif %}>Todos</option>
                    {% for c in continentes %}
                        <option value="{{ c }}" {% if filtros.continente == c %}selected{% endif %}>{{ c }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Población -->
            <div class="filtro-box">
                <label>Población:</label><br>
                <select name="pop_cmp">
                    <option value="gte" {% if filtros.pop_cmp == 'gte' %}selected{% endif %}>Mayor o igual que</option>
                    <option value="lte" {% if filtros.pop_cmp == 'lte' %}selected{% endif %}>Menor o igual que</option>
                </select>
                <input type="number" name="pop_val" placeholder="Ej: 50000000" value="{{ filtros.pop_val }}" style="width:140px;">
            </div>

            <!-- Superficie -->
            <div class="filtro-box">
                <label>Superficie (km²):</label><br>
                <select name="surf_cmp">
                    <option value="gte" {% if filtros.surf_cmp == 'gte' %}selected{% endif %}>Mayor o igual que</option>
                    <option value="lte" {% if filtros.surf_cmp == 'lte' %}selected{% endif %}>Menor o igual que</option>
                </select>
                <input type="number" name="surf_val" placeholder="Ej: 1000000" value="{{ filtros.surf_val }}" style="width:140px;">
            </div>

            <!-- Botones aplicar / restablecer -->
            <div class="filtro-box" style="display:flex; gap:8px; align-items:center;">
                <button type="submit" class="primary">Aplicar filtros</button>
                <button type="submit" name="restablecer" value="1" class="secondary">Restablecer</button>
            </div>
        </div>
    </form>

    <!-- TABLA (preserva tu estructura y estilos originales) -->
    <table>
        <tr>
            <th>País</th>
            <th>Población</th>
            <th>Superficie (km²)</th>
            <th>Continente</th>
        </tr>
        {% for pais in paises %}
        <tr>
            <td>{{ pais.pais }}</td>
            <td>{{ "{:,}".format(pais.poblacion) }}</td>
            <td>{{ "{:,}".format(pais.superficie) }}</td>
            <td>{{ pais.continente }}</td>
        </tr>
        {% endfor %}
    </table>

    <!-- Tu botón Reveal y contenido (sin cambios visuales) -->
    <button id="toggleBtn" aria-expanded="false" aria-controls="miContenido" class="secondary" style="margin-top:14px;">
        Mostrar contenido
    </button>

    <!-- Contenido ocultable -->
    <div id="miContenido" class="reveal" aria-hidden="true">
      <div class="contenido" >
        <h2>los 3 paises con mayor poblacion</h2>
       <ul>
          <li>
             1:China: 1.439.323.776<br>
             2:India: 1.380.004.385<br>
             3:Estados Unidos: 331.002.651
          </li>
       </ul>
        <h2> los 3 paises con menor poblacion </h2>
        <ul>
           <li>
              1:Nauru: 10.834<br>
              2:Tuvalu: 11.792<br>
              3:Palaos: 18.094
           </li>
        </ul>
        <h2>los 3 paises con mayor superficie(km2)</h2>
       <ul>
          <li>
             1:Rusia: 17.098.242<br>
             2:Canadá: 9.984.670<br>
             3:Estados Unidos: 9.833.517
          </li>
       </ul>
        <h2> los 3 paises con menor superficie(km2) </h2>
        <ul>
           <li>
              1:Mónaco: 2<br>
              2:Nauru: 21<br>
              3:Tuvalu: 26
           </li>
        </ul>
      </div>
    </div>

    <script>
      // Toggle simple y accesible (tu script original)
      const btn = document.getElementById('toggleBtn');
      const contenido = document.getElementById('miContenido');

      btn.addEventListener('click', () => {
        const isOpen = contenido.classList.toggle('is-open');

        // Actualizamos atributos ARIA
        btn.setAttribute('aria-expanded', String(isOpen));
        contenido.setAttribute('aria-hidden', String(!isOpen));

        // cambiar el texto del botón
        btn.textContent = isOpen ? 'Ocultar datos' : 'Mostrar estadisticas';
      });
    </script>

</body>
</html>
